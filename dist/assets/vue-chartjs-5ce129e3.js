import{C as b,B as M,P as S}from"./chart.js-f68cfc2b.js";import{j as C,B as O,p as w,C as K,r as R,q as U,v as A,w as T,t as m,D}from"./@vue-545ec849.js";const B={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},$={type:{type:String,required:!0},...B},k=K[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function i(t){return D(t)?m(t):t}function z(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return D(e)?new Proxy(t,{}):t}function E(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function j(t,e){t.labels=e}function q(t,e,s){const r=[];t.datasets=e.map(a=>{const n=t.datasets.find(l=>l[s]===a[s]);return!n||!a.data||r.includes(n)?{...a}:(r.push(n),Object.assign(n,a),n)})}function F(t,e){const s={labels:[],datasets:[]};return j(s,t.labels),q(s,t.datasets,e),s}const G=C({props:$,setup(t,e){let{expose:s}=e;const r=R(null),a=O(null);s({chart:a});const n=()=>{if(!r.value)return;const{type:o,data:f,options:y,plugins:p,datasetIdKey:P}=t,v=F(f,P),u=z(v,f);a.value=new b(r.value,{type:o,data:u,options:{...y},plugins:p})},l=()=>{const o=m(a.value);o&&(o.destroy(),a.value=null)},d=o=>{o.update(t.updateMode)};return U(n),A(l),T([()=>t.options,()=>t.data],(o,f)=>{let[y,p]=o,[P,v]=f;const u=m(a.value);if(!u)return;let g=!1;if(y){const c=i(y),x=i(P);c&&c!==x&&(E(u,c),g=!0)}if(p){const c=i(p.labels),x=i(v.labels),h=i(p.datasets),L=i(v.datasets);c!==x&&(j(u.config.data,c),g=!0),h&&h!==L&&(q(u.config.data,h,t.datasetIdKey),g=!0)}g&&d(u)},{deep:!0}),()=>w("canvas",{ref:r})}});function I(t,e){return b.register(e),C({props:B,setup(s,r){let{expose:a}=r;const n=O(null),l=d=>{n.value=d==null?void 0:d.chart};return a({chart:n}),()=>w(G,k({ref:l},{type:t,...s}))}})}const N=I("bar",M),Q=I("pie",S);export{N as B,Q as P};

import{_ as b,a as k}from"./fullstar-d08737a6.js";import{a as $,T as E}from"./TableRowInform-921e249c.js";import{d as A}from"./pinia-f2173f69.js";import{a as _}from"./axios-21b846bc.js";import{I as D}from"./index-065bfb3a.js";import{r as S,F as d,G as c,M as x,P as F,I as f,H as o,u as C,X as T}from"./@vue-545ec849.js";_.defaults.withCredentials=!0;const U=A("STFStore",{state:()=>({tab_num:0,all_stf:null,all_stf_loading:!0,all_stf_cond_text:!1,all_stf_headers:[],warehouse_selecting_rows:[],order_list:[],fields:[],warehouse_data:[],warehouse_data_loading:!0,warehouse_data_cond_text:!1,warehouse_headers:[],provides_data:[],provide_data_loading:!0,provide_data_cond_text:!1,provided_data_headers:[],warehouse_selecting_rows:[],msg_cond:!1,after_created:!1}),getters:{GETALLSTF:a=>a.all_stf,GETALLSTFHEADERS:a=>a.all_stf_headers,GETSELECTINGROWS:a=>a.warehouse_selecting_rows,GETFIELDSNAME:a=>a.fields,GETWAREHOUSEDATA:a=>a.warehouse_data,GETWAREHOUSEHEADERS:a=>a.warehouse_headers},actions:{async createSTF(a){try{await _.post("https://ustaypm-server.onrender.com/api/stf/createstf",a).then(e=>e)}catch(e){return e}},async fetchUserSTFAll(a){if(this.all_stf_loading=!0,a!=null&&a.id)try{await _.get(`https://ustaypm-server.onrender.com/api/stf/getuserstfall/${a.id}`).then(e=>{e.data.length!==0?(this.all_stf=e.data,this.all_stf_loading=!1,this.all_stf_cond_text=!1):(this.all_stf_loading=!1,this.all_stf_cond_text=!0)}).catch(e=>{console.log("Fetch User Catch Error : ",e)})}catch(e){return console.log("Fetch User STF Error : ",e),e}},async getFilteredData(a){this.all_stf_loading=!0;const e=this.createUrlQuery(a.filtered_objects);try{await _.get(`https://ustaypm-server.onrender.com/api/common/filterstf/${a.user_id}${e}`).then(t=>{t.data.length!==0?(this.all_stf=t.data,this.all_stf_loading=!1,this.all_stf_cond_text=!1):(this.all_stf_loading=!1,this.all_stf_cond_text=!0)}).catch(t=>{console.log("Error Is : ",t)})}catch(t){console.log("Get Filtered Data Error : ",t)}},async getHeaders(){var a,e;if(((a=this.all_stf)==null?void 0:a.length)>=1){for(let[t,s]of Object.entries(this==null?void 0:this.all_stf[0])){const l=t.slice(t.length-2,t.length);if(t!=="id"&&l!=="id"&&l!=="Id"){let i={},h=t.charAt(0).toUpperCase()+t.slice(1);h=h.split("_").join(" "),t==="completed"||t==="stf_num"||t==="createdAt"||t==="situation"||t==="material_type"||t==="material_name"||t==="amount"||t==="unit"||t==="username"||t==="field_name"?(i.showname=`${h}`,i.name=`${t}`,i.value=!0):(i.showname=`${h}`,i.name=`${t}`,i.value=!1),this.all_stf_headers.push(i)}}for(let t=0;t<((e=this.all_stf_headers)==null?void 0:e.length);t++){if(this.all_stf_headers[t].name==="completed"){let s=this.all_stf_headers[0];this.all_stf_headers[0]=this.all_stf_headers[t],this.all_stf_headers[t]=s}if(this.all_stf_headers[t].name==="stf_num"){let s=this.all_stf_headers[1];this.all_stf_headers[1]=this.all_stf_headers[t],this.all_stf_headers[t]=s}}}},async fetchFieldsNames(a){if(a)try{await _.get(`https://ustaypm-server.onrender.com/api/common/fetchfields/${a}`).then(e=>{this.fields=e.data}).catch(e=>{console.log("Error Is : ",e)})}catch(e){console.log("fetch Field Names Error : ",e)}},async fetchWarehouseData(a){if(a!=null&&a.id){this.warehouse_data_loading=!0;try{await _.get(`https://ustaypm-server.onrender.com/api/stf/warehouse/${a.id}`).then(e=>{var t;((t=e.data)==null?void 0:t.length)!==0?(this.warehouse_data=e.data,this.warehouse_data_loading=!1,this.warehouse_data_cond_text=!1):(this.warehouse_data_loading=!1,this.warehouse_data_cond_text=!0)}).catch(e=>{console.log("Fetch User Catch Error : ",e)})}catch(e){return console.log("Fetch User STF Error : ",e),e}}},async getFilteredWarehouseData(a){this.warehouse_data_loading=!0;const e=this.createUrlQuery(a);try{await _.get(`
                https://ustaypm-server.onrender.com/api/common/filterwarehouse${e}
            `).then(t=>{var s;((s=t.data)==null?void 0:s.length)!==0?(this.warehouse_data=t.data,this.warehouse_data_loading=!1,this.warehouse_data_cond_text=!1):(this.warehouse_data_loading=!1,this.warehouse_data_cond_text=!0)}).catch(t=>{console.log("Error Is : ",t)})}catch(t){console.log("Get Filtered Data Error : ",t)}},async getWarehouseHeaders(){var a;if(((a=this.warehouse_data)==null?void 0:a.length)>=1)for(let[e,t]of Object.entries(this==null?void 0:this.warehouse_data[0])){const s=e.slice(e.length-2,e.length);if(e!=="id"&&s!=="id"&&s!=="Id"){let l={},i=e.charAt(0).toUpperCase()+e.slice(1);i=i.split("_").join(" "),e==="stf_num"||e==="sm_num"||e==="material_name"||e==="amount"||e==="unit"||e==="vendor_name"||e==="stock"||e==="certificate"||e==="passport"||e==="field"?(l.showname=`${i}`,l.name=`${e}`,l.value=!0):(l.showname=`${i}`,l.name=`${e}`,l.value=!1),this.warehouse_headers.push(l)}}},async fetchProvidedData(a){await _.get(`https://ustaypm-server.onrender.com/api/stf/provided/${a.departmentId}`).then(e=>{var t;((t=e.data)==null?void 0:t.length)!==0?(this.provides_data=e.data,this.provide_data_loading=!1,this.provide_data_cond_text=!1,console.log("this provide data : ",this.provides_data)):(this.provide_data_loading=!1,this.provide_data_cond_text=!0)}).catch(e=>{console.log("Provied Items Error : ",e)})},async getFilteredDataProvided(a){const e=this.createUrlQuery(a);try{await _.get(`https://ustaypm-server.onrender.com/api/common/filterprovided${e}`).then(t=>{var s;((s=t.data)==null?void 0:s.length)!==0?(this.provides_data=t.data,this.provide_data_loading=!1,this.provide_data_cond_text=!1):(this.provide_data_loading=!1,this.provide_data_cond_text=!0)}).catch(t=>{console.log("Error Is : ",t)})}catch(t){console.log("Get Filtered Data Error : ",t)}},async getProvidedDataHeaders(){var a;if((a=this.provides_data)!=null&&a.length){for(let[e,t]of Object.entries(this.provides_data[0]))if(e!=="id"){let s={},l=e.charAt(0).toUpperCase()+e.slice(1);l=l.split("_").join(" "),e==="sm_num"||e==="provided_date"||e==="material_name"||e==="amount"||e==="unit"||e==="serial_no"||e==="unique_id"||e==="deliver_to"||e==="card_number"?(s.showname=`${l}`,s.name=`${e}`,s.value=!0):(s.showname=`${l}`,s.name=`${e}`,s.value=!1),this.provided_data_headers.push(s)}}},createUrlQuery(a){let e="";for(let[t,s]of Object.entries(a))e===""&&(e+="?"),a[t],e+=`${t}=${a[t]}`,e+="&";return e=e.slice(0,-1),e}}}),I={key:0,class:"flex text-lg bg-red-400 text-white rounded-md py-1 mb-1"},G=o("span",{class:"text-center w-full"}," STF Canceled ",-1),j=[G],R={key:1,class:"flex font-bold w-full text-[1.0rem]"},H={key:0,class:"px-2 py-2 text-green-500 bg-green-100 w-full rounded-lg"},O={key:1,class:"px-2 py-2 text-red-500 bg-red-100 w-full rounded-lg"},L={class:"w-1 p-4 py-2"},N={class:"flex items-center"},W={class:"flex cursor-pointer items-center rounded-sm p-1",for:"selected_row","data-ripple-dark":"true"},q=["id"],P={class:"px-2 py-2 font-medium text-center"},Q={class:"px-2 py-2 font-medium text-center"},B={key:0,class:"flex items-center justify-center"},V={key:1,class:"flex items-center justify-center"},z={key:0,class:"flex text-lg bg-red-400 text-white rounded-md py-1 mb-1"},M=o("span",{class:"text-center w-full"}," STF Canceled ",-1),X=[M],J={key:1,class:"flex font-bold w-full text-[1.0rem]"},K={key:0,class:"px-2 py-2 text-green-500 bg-green-100 w-full rounded-lg"},Y={key:1,class:"px-2 py-2 text-red-500 bg-red-100 w-full rounded-lg"},Z={class:"w-1 p-4 py-2"},ee={class:"flex items-center"},te={class:"flex cursor-pointer items-center rounded-sm p-1",for:"selected_row","data-ripple-dark":"true"},ae=["id"],se={class:"px-2 py-2 font-medium text-center"},le={class:"px-2 py-2 font-medium text-center"},re={key:0,class:"flex items-center justify-center"},oe={key:1,class:"flex items-center justify-center"},fe={__name:"ShowSTFEachRow",props:["each","index"],setup(a){const e=a,t=U(),s=D(),l=S(!1),i=()=>{l.value=!l.value,l.value?t.warehouse_selecting_rows.push(e.each):t.warehouse_selecting_rows=t.warehouse_selecting_rows.filter(u=>u.stf_id!==e.each.stf_id)};S(!1);const h=async u=>{console.log("1 data is : ",u),await s.toggleStar(u).then(r=>{var m,g;((m=r==null?void 0:r.data)==null?void 0:m.msg)==="Row Starred"?e.each.starred_id=(g=r==null?void 0:r.data)==null?void 0:g.id:e.each.starred_id=null})};return(u,r)=>{var m,g,y;return(m=e.each)!=null&&m.canceled_id?(d(),c("tr",{key:1,class:T([l.value?"text-white bg-blue-600  hover:bg-blue-500 ":"bg-red-200  hover:bg-blue-600 hover:text-white hover:duration-200 ","border-b hover:cursor-pointer table_row"])},[x($,{each:e==null?void 0:e.each},{stf_complete:F(()=>{var n,p,w,v;return[(n=e.each)!=null&&n.canceled_id?(d(),c("div",z,X)):(d(),c("div",J,[(p=e==null?void 0:e.each)!=null&&p.completed?(d(),c("span",K," Completed : "+f((w=e==null?void 0:e.each)==null?void 0:w.completed),1)):(d(),c("span",Y," Completed : "+f((v=e==null?void 0:e.each)==null?void 0:v.completed),1))]))]}),_:1},8,["each"]),o("td",Z,[o("div",ee,[o("label",te,[o("input",{id:e.each.id,type:"checkbox",onChange:r[3]||(r[3]=n=>i(e.each.id)),class:"checkbox checkbox-xs checkbox-primary"},null,40,ae)])])]),o("th",se,f(e.index+1),1),o("th",le,[(y=e.each)!=null&&y.starred_id?(d(),c("span",oe,[o("img",{onClick:r[5]||(r[5]=n=>h(e.each)),class:"w-4",src:k,alt:""})])):(d(),c("span",re,[o("img",{onClick:r[4]||(r[4]=n=>h(e.each)),class:"w-4",src:b,alt:""})]))]),x(E,{each:e==null?void 0:e.each,table_headers:C(t).all_stf_headers},null,8,["each","table_headers"])],2)):(d(),c("tr",{key:0,class:T([l.value?"text-white bg-blue-600  hover:bg-blue-500 ":"bg-white  hover:bg-blue-600 hover:text-white hover:duration-200 ","border-b hover:cursor-pointer table_row"])},[x($,{each:e==null?void 0:e.each},{stf_complete:F(()=>{var n,p,w,v;return[(n=e.each)!=null&&n.canceled_id?(d(),c("div",I,j)):(d(),c("div",R,[(p=e==null?void 0:e.each)!=null&&p.completed?(d(),c("span",H," Completed : "+f((w=e==null?void 0:e.each)==null?void 0:w.completed),1)):(d(),c("span",O," Completed : "+f((v=e==null?void 0:e.each)==null?void 0:v.completed),1))]))]}),_:1},8,["each"]),o("td",L,[o("div",N,[o("label",W,[o("input",{id:e.each.id,type:"checkbox",onChange:r[0]||(r[0]=n=>i(e.each.id)),class:"checkbox checkbox-xs checkbox-primary"},null,40,q)])])]),o("th",P,f(e.index+1),1),o("th",Q,[(g=e.each)!=null&&g.starred_id?(d(),c("span",V,[o("img",{onClick:r[2]||(r[2]=n=>h(e.each)),class:"w-4",src:k,alt:""})])):(d(),c("span",B,[o("img",{onClick:r[1]||(r[1]=n=>h(e.each)),class:"w-4",src:b,alt:""})]))]),x(E,{each:e==null?void 0:e.each,table_headers:C(t).all_stf_headers},null,8,["each","table_headers"])],2))}}};export{U as S,fe as _};

import{C,B as M,D as S,P as K}from"./chart.js-49eabb2c.js";import{j as D,B as O,p as w,C as R,r as U,q as A,v as T,w as $,t as m,D as B}from"./@vue-545ec849.js";const j={data:{type:Object,required:!0},options:{type:Object,default:()=>({})},plugins:{type:Array,default:()=>[]},datasetIdKey:{type:String,default:"label"},updateMode:{type:String,default:void 0}},k={type:{type:String,required:!0},...j},z=R[0]==="2"?(t,e)=>Object.assign(t,{attrs:e}):(t,e)=>Object.assign(t,e);function l(t){return B(t)?m(t):t}function E(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:t;return B(e)?new Proxy(t,{}):t}function F(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function q(t,e){t.labels=e}function I(t,e,s){const o=[];t.datasets=e.map(a=>{const n=t.datasets.find(i=>i[s]===a[s]);return!n||!a.data||o.includes(n)?{...a}:(o.push(n),Object.assign(n,a),n)})}function G(t,e){const s={labels:[],datasets:[]};return q(s,t.labels),I(s,t.datasets,e),s}const H=D({props:k,setup(t,e){let{expose:s}=e;const o=U(null),a=O(null);s({chart:a});const n=()=>{if(!o.value)return;const{type:r,data:f,options:y,plugins:p,datasetIdKey:h}=t,g=G(f,h),u=E(g,f);a.value=new C(o.value,{type:r,data:u,options:{...y},plugins:p})},i=()=>{const r=m(a.value);r&&(r.destroy(),a.value=null)},d=r=>{r.update(t.updateMode)};return A(n),T(i),$([()=>t.options,()=>t.data],(r,f)=>{let[y,p]=r,[h,g]=f;const u=m(a.value);if(!u)return;let v=!1;if(y){const c=l(y),P=l(h);c&&c!==P&&(F(u,c),v=!0)}if(p){const c=l(p.labels),P=l(g.labels),x=l(p.datasets),L=l(g.datasets);c!==P&&(q(u.config.data,c),v=!0),x&&x!==L&&(I(u.config.data,x,t.datasetIdKey),v=!0)}v&&d(u)},{deep:!0}),()=>w("canvas",{ref:o})}});function b(t,e){return C.register(e),D({props:j,setup(s,o){let{expose:a}=o;const n=O(null),i=d=>{n.value=d==null?void 0:d.chart};return a({chart:n}),()=>w(H,z({ref:i},{type:t,...s}))}})}const Q=b("bar",M),V=b("doughnut",S),W=b("pie",K);export{Q as B,V as D,W as P};

import{W as v,_ as L,a as O,P as ae,T as z,b as H,c as K,d as Y,e as le}from"./TableFilterWarehouse-76238818.js";import{_ as ce}from"./TableFilterSM-43d49fad.js";import{f as $,y as P,o as r,c as _,b as x,a as e,T as b,X as B,t as m,u as i,K as w,M as T,Q as S,F as M,_ as R,U as D,S as I,d as k,A as W,N as se,O as oe,g as E,w as Q,a3 as re,W as C,V as G,a1 as A,Y as de,Z as ne}from"./index-d6c51b4f.js";import{T as j}from"./Toast-54280109.js";import{_ as ie}from"./TableFilterProvide-b3471070.js";const _e={class:"w-1 p-4 py-2"},ue={class:"flex items-center"},he={class:"flex cursor-pointer items-center rounded-sm p-1",for:"selected_row","data-ripple-dark":"true"},xe=["id"],fe={class:"px-2 py-2 text-center"},me={__name:"Get_SM_Body_Table_Each_Row_Comp",props:["each","index"],emits:["addChecked","removeChecked"],setup(u,{emit:t}){const a=u,o=v(),s=$(!1),c=()=>s.value===!0?t("addChecked",a==null?void 0:a.each):t("removeChecked",a==null?void 0:a.each);return P(()=>{o.after_created&&(s.value=!1)}),(d,n)=>(r(),_("tr",{class:w([s.value?"text-white  bg-blue-600 hover:bg-blue-500 ":"bg-white hover:bg-blue-600 hover:text-white hover:duration-200","border-b table_row hover:cursor-pointer"])},[x(L,{each:a==null?void 0:a.each},null,8,["each"]),e("td",_e,[e("div",ue,[e("label",he,[b(e("input",{id:a.each.id,type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=l=>s.value=l),onChange:c,class:"checkbox checkbox-xs checkbox-primary"},null,40,xe),[[B,s.value]])])])]),e("th",fe,m((a==null?void 0:a.index)+1),1),x(O,{each:a==null?void 0:a.each,table_headers:i(o).processing_sm_headers},null,8,["each","table_headers"])],2))}},be={__name:"Get_SM_Body_Table",setup(u){const t=v(),a=s=>{t.processing_checked_values.push(s)},o=s=>{t.processing_checked_values=t.processing_checked_values.filter(c=>c.sm_id!==s.sm_id);for(let c=0;c<t.processing_checked_values.length;c++)t.processing_checked_values[c].stf_id===s.stf_id&&t.processing_checked_values.splice(c,1)};return P(()=>{var c,d,n;const s=$(!1);if(((c=t.processing_checked_values)==null?void 0:c.length)>=1)for(let l of t.processing_checked_values)(l==null?void 0:l.situation)==="Completed"&&(s.value=!0);if(((d=t.processing_checked_values)==null?void 0:d.length)>=1){for(let l=0;l<((n=t.processing_checked_values)==null?void 0:n.length)-1;l++)if(t.processing_checked_values[l].stf_num!==t.processing_checked_values[l+1].stf_num){s.value=!0;break}}s.value?t.toggle_accept_sm=!0:t.toggle_accept_sm=!1}),(s,c)=>(r(!0),_(M,null,T(i(t).processing_sms,(d,n)=>(r(),S(me,{each:d,index:n,onAddChecked:a,onRemoveChecked:o},null,8,["each","index"]))),256))}};const N=u=>(se("data-v-d915c28d"),u=u(),oe(),u),pe={key:0,class:"mtf-anim fixed left-1/4 bottom-10 flex flex-row mb-4 justify-center rounded-lg w-1/2"},ve={class:"flex justify-between bg-white w-full border rounded-md shadow-2xl"},ge={class:"flex items-center"},ye={class:"bg-blue-600 py-4 px-6 text-white font-bold rounded-l-md text-3xl"},ke={class:"ml-3"},we=N(()=>e("p",null,"Task Selected",-1)),$e={class:"text-blue-600"},Se={class:"flex items-center"},Ce=N(()=>e("i",{class:"fa-regular fa-trash-can"},null,-1)),Te=N(()=>e("span",{class:"text-xs"},"Unselect",-1)),Me=["disabled"],Pe=N(()=>e("i",{class:"fa-regular fa-handshake"},null,-1)),Ue=N(()=>e("span",{class:"text-xs"},"Accept SM",-1)),De=N(()=>e("button",{class:"flex flex-col items-center mx-3 cursor-pointer p-1 hover:bg-gray-100"},[e("i",{class:"fa-regular fa-star"}),k(),e("span",{class:"text-xs"},"Set Star")],-1)),Ne={__name:"Show_STF_Selecting_Task",setup(u){const t=v(),a=D(),o=$([]),s=I({cond:!1,messages:""});P(()=>{o.value=t.processing_checked_values});const c=async()=>{a.user?a.user.departmentId!==3?(s.cond=!0,s.messages="You dont have authority for Accepting SM",setTimeout(()=>{s.cond=!1},1e3)):t.tab_num=2:(s.cond=!0,s.messages="User Not Login")},d=()=>{t.after_created=!0,t.processing_checked_values=t.processing_checked_values.filter(n=>n.id===-1),setTimeout(()=>{t.after_created=!1},1e3)};return(n,l)=>o.value.length>=1?(r(),_("div",pe,[e("div",ve,[e("div",ge,[e("span",ye,m(o.value.length),1),e("div",ke,[we,(r(!0),_(M,null,T(o.value.length,f=>(r(),_("span",$e,"●"))),256))])]),e("div",Se,[e("button",{onClick:l[0]||(l[0]=f=>d()),class:"flex flex-col items-center mx-3 cursor-pointer p-1 hover:bg-gray-100"},[Ce,k(),Te]),e("button",{onClick:l[1]||(l[1]=f=>c()),disabled:i(t).toggle_accept_sm,class:w([i(t).toggle_accept_sm?"text-gray-400 hover:bg-white cursor-default ":"","flex flex-col items-center mx-3 cursor-pointer p-1 hover:bg-gray-100"])},[Pe,k(),Ue],10,Me),De])]),x(j,{cond:s.cond,messages:s.messages},null,8,["cond","messages"])])):W("",!0)}},Ve=R(Ne,[["__scopeId","data-v-d915c28d"]]),Fe={class:"flex flex-col",style:{display:"inline-block"}},Be={class:"sticky h-40 top-10 bg-white"},Ie={class:"sticky left-16 flex flex-col w-max bg-white",style:{display:"inline-block",width:"calc(100vw - 5rem)"}},Ae={class:""},Re={key:0,class:"text-xs text-left text-gray-800 dark:text-gray-400 w-full",style:{"font-size":"xx-small"}},We={key:1,class:"flex flex-row justify-center items-center w-full h-96"},Ee=e("span",{class:"loading loading-dots loading-lg"},null,-1),je=[Ee],qe={__name:"Show_SM_Table",setup(u){const t=v(),a=D(),o=ae();E(async()=>{const c=a.GETUSER;c==null?console.log("if work"):(await t.getProcessingSMS(c==null?void 0:c.projectId),await t.getCompaniesNames(),await o.getCompaniesNames(),await t.fetchSTFCreateUsernames(),await o.fetchSTFCreateUsernames(),t.processing_sm_headers.length===0&&await t.getProcessingSMHeaders())});const s=async c=>{await t.getFilteredDataProcessingSM(c)};return(c,d)=>(r(),_("div",Fe,[x(z),e("div",Be,[e("div",Ie,[x(H),x(ce,{onFilterFunction:s},{default:Q(()=>[(r(),S(K,{key:0,table_headers:i(t).processing_sm_headers},null,8,["table_headers"]))]),_:1})])]),e("div",Ae,[i(t).processing_sm_headers.length?(r(),_("table",Re,[x(Y,{table_headers:i(t).processing_sm_headers},null,8,["table_headers"]),x(be)])):(r(),_("div",We,je))]),x(Ve)]))}},Ge={},Le={class:"text-black bg-gray-100 dark:bg-gray-700 dark:text-gray-400 border w-full table_header"},Oe=e("tr",{class:""},[e("th",{scope:"col-4",class:"px-4"},[e("div",{class:"flex flex-col items-center"},[e("input",{id:"checkbox-all-search",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox")])]),e("th",{class:"px-2 py-2 font-medium text-center"},[e("div",{class:"flex flex-col"}," S/S ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col w-24"}," STF NO ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col w-24"}," STF Date ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col w-24"}," SM NO ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border bg-violet-100"},[e("div",{class:"flex flex-col w-24"}," Delivery Amount ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border bg-violet-100"},[e("div",{class:"flex flex-col w-24"}," Delivery Unit ")]),e("th",{scope:"col",class:"py-1 font-medium text-center border bg-violet-100"},[e("div",{class:"flex flex-col w-24"}," Certificate ")]),e("th",{scope:"col",class:"py-1 font-medium text-center border bg-violet-100"},[e("div",{class:"flex flex-col w-24"}," Passport ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"w-96 flex flex-col"}," Material name ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col"}," Count ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col"}," Unit ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col"}," Price ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col"}," Total ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col"}," Currency ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"w-96 flex flex-col"}," Vendor Name ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col w-36"}," Orderer ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border"},[e("div",{class:"flex flex-col w-48"}," Supplier ")])],-1),ze=[Oe];function He(u,t){return r(),_("thead",Le,ze)}const Ke=R(Ge,[["render",He]]),Ye={class:"bg-white border-b hover:bg-gray-50 table_row"},Qe=e("td",{class:"w-1 p-4 py-2"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox")])],-1),Xe={class:"px-2 py-2 text-center"},Ze={class:"px-2 text-start border-y"},Je={class:"bg-orange-100 text-orange-500 py-1 px-2 rounded-xl"},et={class:"px-2 py-2 border text-center"},tt={class:"px-2 text-start border-y"},st={class:"bg-red-100 text-red-500 py-1 px-2 rounded-xl"},ot={class:"px-2 text-start border-y-y"},at={class:"px-2 text-start border-y-y"},lt=e("option",{disabled:"",value:""},"Unit",-1),ct=e("option",null,"Adet",-1),rt=e("option",null,"M2",-1),dt=e("option",null,"M3",-1),nt=e("option",null,"Ton",-1),it=e("option",null,"Kg",-1),_t=[lt,ct,rt,dt,nt,it],ut={class:"px-2 text-center border-y"},ht={class:"px-2 text-center border-y"},xt={class:"px-2 py-2 border-y"},ft={class:"px-2 py-2 border-y text-start"},mt={class:"px-2 py-2 border-y text-center"},bt={class:"px-2 py-2 border-y text-center"},pt={class:"px-2 py-2 border-y text-center"},vt={class:"px-2 py-2 border-y text-center"},gt={class:"px-2 py-2 border-y text-start"},yt={class:"px-2 py-2 border-y text-center"},kt={class:"px-2 py-2 border text-center"},wt={__name:"Get_SM_Body_Table_Each_Row_Comp",props:["each_item","index","table_data"],setup(u){var s,c,d;const t=u,a=v(),o=I({sm_id:t==null?void 0:t.each_item.sm_id,entering_delivery_amount:(s=t==null?void 0:t.each_item)==null?void 0:s.left_over,delivery_amount:(c=t==null?void 0:t.each_item)==null?void 0:c.left_over,delivery_unit:(d=t==null?void 0:t.each_item)==null?void 0:d.sm_material_unit,certificate:!1,passport:!1});return P(()=>{(o==null?void 0:o.entering_delivery_amount)<(o==null?void 0:o.delivery_amount)+(o==null?void 0:o.delivery_amount)*10/100?(a.processing_checked_values.length>t.table_data.length&&t.table_data.push(o),a.accepted_condition=!0):(alert("u cant enter this value because bigger than %10"),a.accepted_condition=!1)}),(n,l)=>{var f,p,y,h,g,F,q,X,Z,J,ee,te;return r(),_("tr",Ye,[Qe,e("td",Xe,m((t==null?void 0:t.index)+1),1),e("td",Ze,[e("div",Je,[e("span",null,m((f=t==null?void 0:t.each_item)==null?void 0:f.stf_num),1)])]),e("td",et,[x(re,{time:(p=t==null?void 0:t.each_item)==null?void 0:p.created_at},null,8,["time"])]),e("td",tt,[e("div",st,m((y=t==null?void 0:t.each_item)==null?void 0:y.sm_num),1)]),e("td",ot,[b(e("input",{class:"border-y outline-none font-sans rounded-lg w-full h-full p-1 text-xs",type:"text",placeholder:"Count...","onUpdate:modelValue":l[0]||(l[0]=U=>o.entering_delivery_amount=U)},null,512),[[C,o.entering_delivery_amount]])]),e("td",at,[b(e("select",{class:"border-y outline-none font-sans rounded-lg w-full h-full p-1 text-xs","onUpdate:modelValue":l[1]||(l[1]=U=>o.delivery_unit=U)},_t,512),[[G,o.delivery_unit]])]),e("td",ut,[b(e("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":l[2]||(l[2]=U=>o.certificate=U),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[B,o.certificate]])]),e("td",ht,[b(e("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":l[3]||(l[3]=U=>o.passport=U),class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 focus:ring-2"},null,512),[[B,o.passport]])]),e("td",xt,m((h=t==null?void 0:t.each_item)==null?void 0:h.sm_material_name),1),e("td",ft,m((g=t==null?void 0:t.each_item)==null?void 0:g.amount),1),e("td",mt,m((F=t==null?void 0:t.each_item)==null?void 0:F.unit),1),e("td",bt,m((q=t==null?void 0:t.each_item)==null?void 0:q.price),1),e("td",pt,m((X=t==null?void 0:t.each_item)==null?void 0:X.total),1),e("td",vt,m((Z=t==null?void 0:t.each_item)==null?void 0:Z.currency),1),e("td",gt,m((J=t==null?void 0:t.each_item)==null?void 0:J.vendor_name),1),e("td",yt,m((ee=t==null?void 0:t.each_item)==null?void 0:ee.orderer),1),e("td",kt,m((te=t==null?void 0:t.each_item)==null?void 0:te.supplier),1)])}}},$t={__name:"Get_SM_Body_Table",props:["table_data"],setup(u){const t=v();return(a,o)=>{var s;return r(!0),_(M,null,T((s=i(t))==null?void 0:s.processing_checked_values,(c,d)=>(r(),S(wt,{table_data:u.table_data,each_item:c,index:d},null,8,["table_data","each_item","index"]))),256)}}},St={class:"flex flex-row my-1 items-end"},Ct={class:"flex flex-col m-1"},Tt=e("span",{class:"text-xs m-1"},"Providing Date",-1),Mt={class:"flex flex-col m-1"},Pt=e("span",{class:"text-xs m-1"},"Document Date",-1),Ut={class:"flex flex-col m-1"},Dt=e("span",{class:"text-xs m-1"},"Document Number",-1),Nt={__name:"Accepting_data",props:["sms_data"],setup(u){const t=u;return(a,o)=>(r(),_("div",St,[e("div",Ct,[Tt,b(e("input",{class:"border outline-none rounded-md border-gray-300 text-xs p-2",type:"date",name:"",id:"",placeholder:"Date","onUpdate:modelValue":o[0]||(o[0]=s=>t.sms_data.providing_date=s)},null,512),[[C,t.sms_data.providing_date]])]),e("div",Mt,[Pt,b(e("input",{class:"border outline-none rounded-md border-gray-300 text-xs p-2",type:"date",name:"",id:"",placeholder:"Date","onUpdate:modelValue":o[1]||(o[1]=s=>t.sms_data.doc_date=s)},null,512),[[C,t.sms_data.doc_date]])]),e("div",Ut,[Dt,b(e("input",{type:"text",id:"search",class:"block w-full p-2 text-xs text-gray-900 border border-gray-300 rounded-lg focus:ring-blue-500 focus:border-blue-500 dark:bg-gray-700 dark:border-gray-600 dark:placeholder-gray-400 dark:text-white dark:focus:ring-blue-500 dark:focus:border-blue-500",placeholder:"Document Number","onUpdate:modelValue":o[2]||(o[2]=s=>t.sms_data.doc_number=s)},null,512),[[C,t.sms_data.doc_number]])])]))}},Vt={class:"mt-1 shadow-md sm:rounded-lg w-screen overflow-x-scroll border-2"},Ft=["disabled"],Bt={class:"p-2 px-3 text-white font-weight rounded-lg my-1 bg-red-600"},It=e("span",{class:"loading loading-spinner"},null,-1),At={class:"text-xs text-left text-gray-800 dark:text-gray-400 w-full"},Rt={__name:"Accept_SM_Table",setup(u){const t=v(),a=D(),o=$(!0),s=I({doc_date:"",providing_date:"",doc_number:""}),c=$([]),d=async()=>{o.value=!1;let n=!0;for(let[l,f]of Object.entries(s)){if(f=f.toString().trim(),l==="doc_number"&&f===""){n=!1,alert("Doc Number Cant Be Empty");break}if(l==="providing_date"&&f===""){n=!1,alert("Provind Date Cant Be Empty");break}if(l==="doc_date"&&f===""){n=!1,alert("Doc Date Cant Be Empty");break}}for(let l=0;l<c.value.length>0;l++)if(!c.value[l].delivery_unit){n=!1,alert(`${l+1} Row, Delivery Unit Not Selected`);break}if(n){const l={user:a.user,checked_values:t.processing_checked_values,sms_data:s,table_data:c.value};await t.acceptWaitingSM(l).then(f=>{t.after_created=!0,t.processing_checked_values=t.processing_checked_values.filter(p=>p.id===-1),setTimeout(async()=>{await t.getProcessingSMS(),o.value=!0,s.doc_date="",s.providing_date="",s.doc_number="",t.tab_num=0},1e3),setTimeout(()=>{t.after_created=!1},2e3)}).catch(f=>{console.log("Received Material Error : ",f)})}else o.value=!0};return(n,l)=>{var f,p;return r(),_("div",Vt,[((f=i(t).processing_checked_values)==null?void 0:f.length)>0?b((r(),_("button",{key:0,onClick:d,disabled:!i(t).accepted_condition,class:w(["p-2 px-3 text-white font-weight rounded-lg my-1",(p=i(t))!=null&&p.accepted_condition?"bg-red-600 ":"bg-red-200"])}," Accept ",10,Ft)),[[A,o.value]]):W("",!0),b(e("button",Bt,[It,k(" Loading ")],512),[[A,!o.value]]),x(Nt,{sms_data:s},null,8,["sms_data"]),e("table",At,[x(Ke),x($t,{table_data:c.value},null,8,["table_data"])]),x(j,{cond:i(t).after_created,messages:"SM Successfuly Received"},null,8,["cond"])])}}},Wt={class:"w-1 p-4 py-2"},Et={class:"flex items-center"},jt=e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox",-1),qt={class:"px-2 py-3 text-center"},Gt={__name:"Warehouse_Table_Body_Each_Row",props:["each","index"],emits:["addChecked","removeChecked"],setup(u,{emit:t}){const a=u,o=v(),s=$(!1),c=()=>s.value===!0?t("addChecked",a==null?void 0:a.each):t("removeChecked",a==null?void 0:a.each);return P(()=>{o.after_provide&&(s.value=!1)}),(d,n)=>(r(),_("tr",{class:w([s.value?"text-white  bg-blue-600 hover:bg-blue-500 ":"bg-white hover:bg-blue-600 hover:text-white hover:duration-200","border-b table_row hover:cursor-pointer"])},[x(L,{each:a==null?void 0:a.each},null,8,["each"]),e("td",Wt,[e("div",Et,[jt,b(e("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=l=>s.value=l),onChange:c,class:"checkbox checkbox-xs checkbox-primary"},null,544),[[B,s.value]])])]),e("th",qt,m((a==null?void 0:a.index)+1),1),x(O,{each:a==null?void 0:a.each,table_headers:i(o).warehouse_data_headers},null,8,["each","table_headers"])],2))}},Lt={__name:"Warehouse_Table_Body",setup(u){const t=v(),a=s=>{t.warehouse_data_checked_values.push(s),console.log("item ius : ",t.warehouse_data_checked_values)},o=s=>{t.warehouse_data_checked_values=t.warehouse_data_checked_values.filter(c=>c.sm_id!==s.sm_id);for(let c=0;c<t.warehouse_data_checked_values.length;c++)t.warehouse_data_checked_values[c].sm_id===s.sm_id&&t.warehouse_data_checked_values.splice(c,1)};return P(()=>{}),(s,c)=>(r(!0),_(M,null,T(i(t).warehouse_data,(d,n)=>(r(),S(Gt,{each:d,index:n,onAddChecked:a,onRemoveChecked:o},null,8,["each","index"]))),256))}};const V=u=>(se("data-v-90f11fbe"),u=u(),oe(),u),Ot={key:0,class:"mtf-anim fixed w-full bottom-10 flex flex-col mb-4 items-center rounded-lg"},zt={class:"flex justify-between bg-white w-1/2 border rounded-md shadow-2xl"},Ht={class:"flex items-center"},Kt={class:"bg-blue-600 py-4 px-6 text-white font-bold rounded-l-md text-3xl"},Yt={class:"ml-3"},Qt=V(()=>e("p",null,"Task Selected",-1)),Xt={class:"text-blue-600"},Zt={class:"flex items-center"},Jt=V(()=>e("i",{class:"fa-regular fa-trash-can"},null,-1)),es=V(()=>e("span",{class:"text-xs"},"Unselect",-1)),ts=["disabled"],ss=V(()=>e("i",{class:"fa-regular fa-handshake"},null,-1)),os=V(()=>e("span",{class:"text-xs"},"Provide SM",-1)),as=V(()=>e("button",{class:"flex flex-col items-center mx-3 cursor-pointer p-1 hover:bg-gray-100"},[e("i",{class:"fa-regular fa-star"}),k(),e("span",{class:"text-xs"},"Set Star")],-1)),ls={__name:"Show_Warehouse_Selecting_Task",setup(u){const t=v(),a=D(),o=I({cond:!1,messages:""}),s=async()=>{a.user?a.user.departmentId!==3?(o.cond=!0,o.messages="You dont have authority for providing data",setTimeout(()=>{o.cond=!1},1e3)):t.tab_num=3:(o.cond=!0,o.messages="User Not Login")},c=()=>{t.after_provide=!0,t.warehouse_data_checked_values=t.warehouse_data_checked_values.filter(d=>d.id===-1),setTimeout(()=>{t.after_provide=!1},1e3)};return(d,n)=>{var l;return((l=i(t).warehouse_data_checked_values)==null?void 0:l.length)>=1?(r(),_("div",Ot,[e("div",zt,[e("div",Ht,[e("span",Kt,m(i(t).warehouse_data_checked_values.length),1),e("div",Yt,[Qt,(r(!0),_(M,null,T(i(t).warehouse_data_checked_values.length,f=>(r(),_("span",Xt,"●"))),256))])]),e("div",Zt,[e("button",{onClick:n[0]||(n[0]=f=>c()),class:"flex flex-col items-center mx-3 cursor-pointer p-1 hover:bg-gray-100"},[Jt,k(),es]),e("button",{onClick:n[1]||(n[1]=f=>s()),disabled:i(t).toggle_received_sm,class:w([i(t).toggle_received_sm?"text-gray-400 hover:bg-white cursor-default ":"","flex flex-col items-center mx-3 cursor-pointer p-1 hover:bg-gray-100"])},[ss,k(),os],10,ts),as])]),x(j,{cond:o.cond,messages:o.messages},null,8,["cond","messages"])])):W("",!0)}}},cs=R(ls,[["__scopeId","data-v-90f11fbe"]]),rs={class:"flex flex-col",style:{display:"inline-block"}},ds={class:"sticky h-40 top-10 bg-white"},ns={class:"sticky left-16 flex flex-col w-max bg-white",style:{display:"inline-block",width:"calc(100vw - 5rem)"}},is={class:""},_s={key:0,class:"mx-2 text-gray-800 dark:text-gray-400 w-full shadow-xl bg-white mt-1",style:{"font-size":"xx-small"}},us={key:1,class:"flex flex-row justify-center items-center w-full h-96"},hs=e("span",{class:"loading loading-dots loading-lg"},null,-1),xs=[hs],fs={__name:"Warehouse_Table",setup(u){const t=v();E(async()=>{await t.fetchWarehouseData(),t.warehouse_data_headers.length===0&&t.getWarehouseDataHeaders()});const a=async o=>{await t.getFilteredDataWarehouse(o)};return(o,s)=>(r(),_("div",rs,[x(z),e("div",ds,[e("div",ns,[x(H),x(le,{onFilterFunction:a},{default:Q(()=>[(r(),S(K,{key:0,table_headers:i(t).warehouse_data_headers},null,8,["table_headers"]))]),_:1})])]),e("div",is,[i(t).warehouse_data_headers.length?(r(),_("table",_s,[x(Y,{table_headers:i(t).warehouse_data_headers},null,8,["table_headers"]),x(Lt)])):(r(),_("div",us,xs))]),x(cs)]))}},ms={class:"bg-white border-b hover:bg-gray-50 table_row"},bs=e("td",{class:"w-1 p-4 py-2"},[e("div",{class:"flex items-center"},[e("input",{id:"checkbox-table-search-1",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox")])],-1),ps={class:"px-2 py-2 text-center"},vs={class:"px-2 text-start border-y"},gs={class:"py-1 px-2 rounded-xl"},ys={class:"px-2 text-start border-y"},ks={class:"py-1 px-2 rounded-xl"},ws={class:"px-2 text-start border-y"},$s={class:"py-1 px-2 rounded-xl"},Ss={class:"px-2 text-start border-y"},Cs={class:"py-1 px-2 rounded-xl"},Ts=["value"],Ms={class:"px-2 text-start border-y"},Ps={class:"py-1 px-2 rounded-xl"},Us={class:"px-2 text-start border-y"},Ds={class:"py-1 px-2 rounded-xl"},Ns={class:"px-2 text-start border-y"},Vs={class:"py-1 px-2 rounded-xl"},Fs={class:"px-2 text-start border-y"},Bs={class:"py-1 px-2 rounded-xl"},Is={class:"px-2 text-start border-y"},As={class:"py-1 px-2 rounded-xl"},Rs={class:"px-2 text-start border-y"},Ws={class:"py-1 px-2 rounded-xl"},Es=["value"],js={__name:"Provide_Sm_Table_Body_Each_Row",props:["each_item","index","entering_rows","store"],setup(u){var d;const t=u,a=v(),o=I({warehouse_id:t==null?void 0:t.each_item.warehouse_id,department_id:t==null?void 0:t.each_item.department_id,stock:(d=t==null?void 0:t.each_item)==null?void 0:d.stock,type:"",provide_amount:0,serial_no:"",unique_id:"",provide_user:"",provide_user_card_number:"",provide_department:""}),s=$([]),c=$([]);return P(()=>{var n,l,f;if(s.value.length===0&&(s.value=(n=t==null?void 0:t.store)==null?void 0:n.delivery_types),c.value.length===0&&(c.value=(l=t==null?void 0:t.store)==null?void 0:l.departments),o.provide_amount>o.stock?(a.warehouse_data_stock_cond=!1,alert(`Stock ${o.stock}, Provide Amount ${o.provide_amount}.`)):a.warehouse_data_stock_cond=!0,((f=t.entering_rows)==null?void 0:f.length)===0)t.entering_rows.push(o);else{let p=!0;for(let y of t.entering_rows)o.warehouse_id===y.warehouse_id&&(p=!1);p&&t.entering_rows.push(o)}}),(n,l)=>{var f,p,y;return r(),_("tr",ms,[bs,e("td",ps,m((t==null?void 0:t.index)+1),1),e("td",vs,[e("div",gs,[e("span",null,m((f=t==null?void 0:t.each_item)==null?void 0:f.material_name),1)])]),e("td",ys,[e("div",ks,[e("span",null,m((p=t==null?void 0:t.each_item)==null?void 0:p.stock),1)])]),e("td",ws,[e("div",$s,[e("span",null,m((y=t==null?void 0:t.each_item)==null?void 0:y.unit),1)])]),e("td",Ss,[e("div",Cs,[b(e("select",{name:"",id:"","onUpdate:modelValue":l[0]||(l[0]=h=>o.type=h),class:"border w-full p-1 rounded-md outline-none"},[(r(!0),_(M,null,T(s.value,h=>(r(),_("option",{value:h.id},m(h.type_name),9,Ts))),256))],512),[[G,o.type]])])]),e("td",Ms,[e("div",Ps,[b(e("input",{class:"border w-full p-1 rounded-md outline-none",type:"num",name:"",placeholder:"Enter Amount","onUpdate:modelValue":l[1]||(l[1]=h=>o.provide_amount=h)},null,512),[[C,o.provide_amount]])])]),e("td",Us,[e("div",Ds,[b(e("input",{class:"border w-full p-1 rounded-md outline-none",type:"text",name:"",placeholder:"Serial NO","onUpdate:modelValue":l[2]||(l[2]=h=>o.serial_no=h)},null,512),[[C,o.serial_no]])])]),e("td",Ns,[e("div",Vs,[b(e("input",{class:"border w-full p-1 rounded-md outline-none",type:"text",name:"",placeholder:"Unique ID","onUpdate:modelValue":l[3]||(l[3]=h=>o.unique_id=h)},null,512),[[C,o.unique_id]])])]),e("td",Fs,[e("div",Bs,[b(e("input",{class:"border w-full p-1 rounded-md outline-none",type:"text",name:"",placeholder:"Name Surname","onUpdate:modelValue":l[4]||(l[4]=h=>o.provide_user=h)},null,512),[[C,o.provide_user]])])]),e("td",Is,[e("div",As,[b(e("input",{class:"border w-full p-1 rounded-md outline-none",type:"text",name:"",placeholder:"Card Number","onUpdate:modelValue":l[5]||(l[5]=h=>o.provide_user_card_number=h)},null,512),[[C,o.provide_user_card_number]])])]),e("td",Rs,[e("div",Ws,[b(e("select",{name:"",id:"","onUpdate:modelValue":l[6]||(l[6]=h=>o.provide_department=h),class:"border w-full p-1 rounded-md outline-none"},[(r(!0),_(M,null,T(c.value,h=>(r(),_("option",{value:h.id},m(h.department_name),9,Es))),256))],512),[[G,o.provide_department]])])])])}}},qs={__name:"Provide_SM_Table_Body",props:["entering_rows"],setup(u){const t=v();return(a,o)=>{var s;return r(!0),_(M,null,T((s=i(t))==null?void 0:s.warehouse_data_checked_values,(c,d)=>(r(),S(js,{each_item:c,index:d,entering_rows:u.entering_rows,store:i(t)},null,8,["each_item","index","entering_rows","store"]))),256)}}},Gs={},Ls={class:"text-white bg-slate-800 dark:bg-gray-700 dark:text-gray-400 border w-full table_header"},Os=e("tr",{class:""},[e("th",{scope:"col-4",class:"px-4"},[e("div",{class:"flex flex-col items-center"},[e("input",{id:"checkbox-all-search",type:"checkbox",class:"w-4 h-4 text-blue-600 bg-gray-100 border-gray-300 rounded focus:ring-blue-500 dark:focus:ring-blue-600 dark:ring-offset-gray-800 dark:focus:ring-offset-gray-800 focus:ring-2 dark:bg-gray-700 dark:border-gray-600"}),e("label",{for:"checkbox-all-search",class:"sr-only"},"checkbox")])]),e("th",{class:"px-2 py-2 font-medium text-center"},[e("div",{class:"flex flex-col"}," S/S ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border w-1/3"},[e("div",{class:"flex flex-col"}," Material name ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border w-24"},[e("div",{class:"flex flex-col w-24"}," Stock ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border w-24"},[e("div",{class:"flex flex-col w-24"}," Unit ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border bg-violet-500"},[e("div",{class:"flex flex-col"}," Type ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border bg-violet-500"},[e("div",{class:"flex flex-col"}," Provide Amount ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border bg-violet-500"},[e("div",{class:"flex flex-col"}," Serial Number ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border bg-violet-500"},[e("div",{class:"flex flex-col"}," Unique ID ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border bg-violet-500"},[e("div",{class:"flex flex-col"}," Provide Worker ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border bg-violet-500"},[e("div",{class:"flex flex-col"}," Card number ")]),e("th",{scope:"col",class:"px-2 py-1 font-medium text-center border bg-violet-500"},[e("div",{class:"flex flex-col"}," Provide Department ")])],-1),zs=[Os];function Hs(u,t){return r(),_("thead",Ls,zs)}const Ks=R(Gs,[["render",Hs]]),Ys={class:"mt-1 shadow-md sm:rounded-lg w-screen overflow-x-scroll p-2"},Qs=e("h1",{class:"text-center text-3xl py-4",style:{"font-family":"'Poppins'"}}," Material Provide Form",-1),Xs={class:"text-xs text-left text-gray-800 dark:text-gray-400 w-full"},Zs=["disabled"],Js={class:"p-2 px-3 text-white font-weight rounded-lg my-1 bg-red-600"},eo=e("span",{class:"loading loading-spinner"},null,-1),to={__name:"Provide_SM_Table",setup(u){const t=D(),a=v(),o=$(!0),s=$([]);E(async()=>{await a.fetchDepartments(),await a.fetchWarehouseDeliveryTypes()});const c=async()=>{var n,l,f,p,y;o.value=!1;const d={};if(t.user!==null){d.user=t.user.id;let h=!0;for(let g=0;g<s.value.length;g++){if(((n=s==null?void 0:s.value[g])==null?void 0:n.type)===""){h=!1,alert(`${g+1} Row, Type Is Not Selected`);break}if(((l=s==null?void 0:s.value[g])==null?void 0:l.provide_amount)<=0){h=!1,alert(`${g+1} Row, Provided Amount Is Not True`);break}if(((f=s==null?void 0:s.value[g])==null?void 0:f.provide_user.toString().trim())===""){h=!1,alert(`${g+1} Row, Provided User Name Is Not Included`);break}if(((p=s==null?void 0:s.value[g])==null?void 0:p.provide_user_card_number.toString().trim())===""){h=!1,alert(`${g+1} Row, Provided User Card Number Is Not Included`);break}if(((y=s==null?void 0:s.value[g])==null?void 0:y.provide_department)===""){h=!1,alert(`${g+1} Row, Department Is Not Selected`);break}}h?(d.data=s.value,await a.provideSM(d).then(g=>{a.after_provide=!0,setTimeout(()=>{o.value=!0,a.warehouse_data_checked_values=a.warehouse_data_checked_values.filter(F=>F.id===-1),a.tab_num=1},1e3),setTimeout(()=>{s.value=[],a.after_provide=!1},2e3)})):o.value=!0}};return(d,n)=>{var l;return r(),_("div",Ys,[Qs,e("table",Xs,[x(Ks),x(qs,{entering_rows:s.value},null,8,["entering_rows"])]),(l=i(a).warehouse_data_checked_values)!=null&&l.length?b((r(),_("button",{key:0,onClick:c,disabled:!i(a).warehouse_data_stock_cond,class:w(["p-2 px-3 text-white font-weight rounded-lg my-1",i(a).warehouse_data_stock_cond?"bg-red-600 cursor-pointer":"bg-red-200 cursor-default"])}," Provide ",10,Zs)),[[A,o.value]]):W("",!0),b(e("button",Js,[eo,k(" Loading ")],512),[[A,!o.value]]),x(j,{cond:i(a).after_provide,messages:"Material Successfully Provided"},null,8,["cond"])])}}},so={class:"w-1 p-4 py-2"},oo={class:"flex items-center"},ao=e("label",{for:"checkbox-table-search-1",class:"sr-only"},"checkbox",-1),lo={class:"px-2 py-3 text-center"},co={__name:"Provided_Table_Body_Each_Row",props:["each","index"],emits:["addChecked","removeChecked"],setup(u,{emit:t}){const a=u,o=v(),s=$(!1),c=()=>s.value===!0?t("addChecked",a==null?void 0:a.each):t("removeChecked",a==null?void 0:a.each);return P(()=>{o.after_provide&&(s.value=!1)}),(d,n)=>(r(),_("tr",{class:w([s.value?"text-white  bg-blue-600 hover:bg-blue-500 ":"bg-white hover:bg-blue-600 hover:text-white hover:duration-200","border-b table_row hover:cursor-pointer"])},[x(L,{each:a==null?void 0:a.each},null,8,["each"]),e("td",so,[e("div",oo,[ao,b(e("input",{id:"checkbox-table-search-1",type:"checkbox","onUpdate:modelValue":n[0]||(n[0]=l=>s.value=l),onChange:c,class:"checkbox checkbox-xs checkbox-primary"},null,544),[[B,s.value]])])]),e("th",lo,m((a==null?void 0:a.index)+1),1),x(O,{each:a==null?void 0:a.each,table_headers:i(o).provided_data_headers},null,8,["each","table_headers"])],2))}},ro={__name:"Provided_Table_Body",setup(u){const t=v(),a=s=>{t.warehouse_data_checked_values.push(s),console.log("item ius : ",t.warehouse_data_checked_values)},o=s=>{t.warehouse_data_checked_values=t.warehouse_data_checked_values.filter(c=>c.sm_id!==s.sm_id);for(let c=0;c<t.warehouse_data_checked_values.length;c++)t.warehouse_data_checked_values[c].sm_id===s.sm_id&&t.warehouse_data_checked_values.splice(c,1)};return P(()=>{}),(s,c)=>(r(!0),_(M,null,T(i(t).provides_data,(d,n)=>(r(),S(co,{each:d,index:n,onAddChecked:a,onRemoveChecked:o},null,8,["each","index"]))),256))}},no={class:"flex flex-col",style:{display:"inline-block"}},io={class:"sticky h-40 top-10 bg-white"},_o={class:"sticky left-16 flex flex-col w-max bg-white",style:{display:"inline-block",width:"calc(100vw - 5rem)"}},uo={class:""},ho={key:0,class:"mx-2 text-gray-800 dark:text-gray-400 w-full shadow-xl bg-white mt-1",style:{"font-size":"xx-small"}},xo={key:1,class:"flex flex-row justify-center items-center w-full h-96"},fo=e("span",{class:"loading loading-dots loading-lg"},null,-1),mo=[fo],bo={__name:"Provided_Table",setup(u){const t=v();E(async()=>{await t.fetchProvidedData(),t.provided_data_headers.length===0&&t.getProvidedDataHeaders()});const a=async o=>{await t.getFilteredDataProvided(o)};return(o,s)=>(r(),_("div",no,[x(z),e("div",io,[e("div",_o,[x(H),x(ie,{onFilterFunction:a},{default:Q(()=>[(r(),S(K,{key:0,table_headers:i(t).provided_data_headers},null,8,["table_headers"]))]),_:1})])]),e("div",uo,[i(t).provided_data_headers.length?(r(),_("table",ho,[x(Y,{table_headers:i(t).provided_data_headers},null,8,["table_headers"]),x(ro)])):(r(),_("div",xo,mo))])]))}},po={class:"flex flex-col bg-white"},vo={key:0,class:"bg-white"},go={class:"sticky top-0 bg-white",style:{"font-family":"'Poppins', sans-serif"}},yo={class:"flex flex-row anim h-10 bg-white items-center sticky left-16",style:{"letter-spacing":"1px","font-size":"x-small",display:"inline-block"}},ko=e("i",{class:"fa-solid fa-arrow-rotate-left fa-md"},null,-1),wo=e("i",{class:"fa-solid fa-download fa-md"},null,-1),$o=e("i",{class:"fa-solid fa-plus fa-md"},null,-1),So=e("i",{class:"fa-solid fa-minus fa-md"},null,-1),Co=e("i",{class:"fa-solid fa-minus fa-md"},null,-1),To={key:1},Mo=e("span",null,"User Not Login",-1),Po=[Mo],Bo={__name:"views.warehouse",setup(u){const t=v(),a=D(),o=[qe,fs,Rt,to,bo],s=c=>{c!==2&&(t.tab_num=c)};return(c,d)=>{var n,l,f,p,y;return r(),_("div",po,[i(a).user?(r(),_("div",vo,[e("div",go,[e("div",yo,[e("span",{class:w([((n=i(t))==null?void 0:n.tab_num)===0?"border-b-violet-800 border-b-4 ":"","text-black px-3 mx-1 pb-2 border-b-2 cursor-pointer"]),onClick:d[0]||(d[0]=h=>s(0))},[ko,k(" Processing SM")],2),e("span",{class:w([((l=i(t))==null?void 0:l.tab_num)===1?"border-b-violet-800 border-b-4 ":"","text-black px-3 pb-2 mx-1 border-b-2 cursor-pointer"]),onClick:d[1]||(d[1]=h=>s(1))},[wo,k(" Warehouse")],2),e("span",{class:w([((f=i(t))==null?void 0:f.tab_num)===2?"border-b-violet-800 border-b-4 ":"","text-black px-3 pb-2 mx-1 border-b-2 cursor-pointer"]),onClick:d[2]||(d[2]=h=>s(2))},[$o,k(" Accept SM")],2),e("span",{class:w([((p=i(t))==null?void 0:p.tab_num)===3?"border-b-violet-800 border-b-4 ":"","text-black px-3 pb-2 mx-1 border-b-2 cursor-pointer"]),onClick:d[3]||(d[3]=h=>s(3))},[So,k(" Provide SM")],2),e("span",{class:w([((y=i(t))==null?void 0:y.tab_num)===4?"border-b-violet-800 border-b-4 ":"","text-black px-3 pb-2 mx-1 border-b-2 cursor-pointer"]),onClick:d[4]||(d[4]=h=>s(4))},[Co,k(" Provided")],2)])]),(r(),S(ne,null,[(r(),S(de(o[i(t).tab_num])))],1024))])):(r(),_("div",To,Po))])}}};export{Bo as default};
